# Story 3.4: Assignment Status Visibility Enhancement

## Status
Draft

## Story
**As a tournament referee,**  
**I need assignment status indicators prominently visible across all screens,**  
**so that I can always understand the current state of my assignments without navigating to specific assignment views.**

## Acceptance Criteria
1. Assignment status indicators integrated across all screens:
   - **Global Status Bar:** Persistent status indicator showing current assignment state
   - **Screen-Level Indicators:** Assignment status context relevant to each screen
   - **Navigation Integration:** Assignment status reflected in navigation elements
   - **Notification Integration:** Status changes communicated through notification system
2. Assignment status visual design optimized for instant recognition:
   - **Color Coding:** Consistent status color coding across all screens (current, upcoming, completed)
   - **Icon System:** Status icons providing instant visual recognition
   - **Animation States:** Smooth transitions for status changes with appropriate feedback
   - **Urgency Indicators:** Critical status changes highlighted with maximum visibility
3. Assignment status real-time updates across all screen interfaces
4. Status indicator accessibility with color-blind accessible alternatives
5. Assignment status integration with offline capabilities and sync status

## Tasks / Subtasks
- [ ] **Task 1: Global Status Management System** (AC: 1, 3)
  - [ ] Create AssignmentStatusManager service for centralized status state management
  - [ ] Implement global status context provider for cross-screen status sharing
  - [ ] Build status update propagation system for real-time status changes
  - [ ] Create status persistence layer with AsyncStorage for offline status tracking
  - [ ] Implement status sync reconciliation for online/offline status alignment

- [ ] **Task 2: Global Status Bar Implementation** (AC: 1, 2)  
  - [ ] Design persistent status bar component positioned at screen top
  - [ ] Implement current assignment status display with countdown timer
  - [ ] Build assignment urgency indicators with color-coded time warnings
  - [ ] Create quick status tap-to-expand functionality for assignment details
  - [ ] Integrate status bar with navigation header across all screens

- [ ] **Task 3: Screen-Level Status Integration** (AC: 1, 2)
  - [ ] Integrate assignment status indicators into RefereeDashboardScreen
  - [ ] Add contextual status displays to MyAssignmentsScreen with timeline integration
  - [ ] Implement status indicators in MatchResultsScreen for assignment correlation
  - [ ] Build TournamentInfoScreen status context for tournament progress awareness
  - [ ] Create SettingsScreen status display for status notification preferences

- [ ] **Task 4: Navigation Status Integration** (AC: 1, 2)
  - [ ] Update NavigationHeader with assignment status indicator integration
  - [ ] Modify BottomTabNavigation to reflect current assignment status context
  - [ ] Implement tab badge system showing assignment counts per status type
  - [ ] Create navigation shortcuts based on current assignment status (quick actions)
  - [ ] Build status-aware back navigation with contextual return paths

- [ ] **Task 5: Visual Design System & Accessibility** (AC: 2, 4)
  - [ ] Implement consistent status color coding system across all components
  - [ ] Create status icon library with instant visual recognition patterns
  - [ ] Build animation system for smooth status transitions with appropriate feedback
  - [ ] Design urgency indicators with maximum visibility treatment for critical changes  
  - [ ] Implement color-blind accessible alternatives with pattern/shape indicators

- [ ] **Task 6: Notification Integration & Real-time Updates** (AC: 1, 3)
  - [ ] Integrate status changes with notification system for status change alerts
  - [ ] Build real-time status update system with background sync capabilities
  - [ ] Create push notification handling for external assignment status changes
  - [ ] Implement status change sound/vibration feedback with user preference controls
  - [ ] Build status history tracking for assignment status change audit trail

## Dev Notes

### Previous Story Insights
From Story 3.3 (Referee Information Hierarchy Implementation):
- Established comprehensive information hierarchy system with primary/secondary/tertiary classification enabling consistent status indicator placement
- Created HierarchyContainer and InfoGroup components that can be enhanced with status indicator integration
- Built ContextSensitiveDisplay system with referee context detection that provides foundation for status-aware display logic
- Implemented enhanced CurrentAssignmentCard with time-critical highlighting that can be extended with status indicator integration
- Updated RefereeDashboardScreen with new hierarchy patterns providing structure for status indicator placement

### Visual Design System & Status Indicators  
**Source:** `docs/referee-frontend-spec/component-library-design-system.md`, `docs/referee-frontend-spec/branding-style-guide.md`

#### Status Color Coding System
- **Active (Green):** `#2E8B57` - Active/live match indicators for current assignments
- **Upcoming (Blue):** `#4A90A4` - Supporting elements, borders for upcoming assignments  
- **Completed (Gray):** `#7F8C8D` - Secondary text, metadata for completed assignments
- **Cancelled (Red):** `#C41E3A` - Cancelled matches, critical alerts for cancelled assignments
- **Warning (Orange):** `#FF8C00` - Upcoming assignments, alerts for time-critical status
- **Accent (Orange):** `#FF6B35` - Call-to-action buttons, active states for status interactions

#### Status Indicator Components
- **High contrast ratios** for outdoor visibility with minimum 7:1 contrast ratio compliance
- **Icon + text combinations** for accessibility with color-blind accessible alternatives
- **Touch targets:** 44px minimum, 56px preferred for status indicator interaction
- **Status-first design** - every component communicates current state clearly

#### Typography for Status Indicators  
- **Caption (14px Medium):** Metadata, timestamps, status text for compact status displays
- **Body (16px Regular):** Standard text for status descriptions and context
- **Hero (40px Bold):** Current court number display for priority assignment status

### Screen Architecture & Status Integration
**Source:** `docs/referee-frontend-spec/screen-layouts.md`, `docs/referee-frontend-spec/information-architecture.md`

#### Navigation Structure with Status Integration
- **State 2: Tournament Selected** - Bottom tab bar with 4 sections requiring status indicator integration
- **Persistent State Management** - localStorage/AsyncStorage saves assignment status with tournament context
- **Auto-resume** to referee dashboard with status indicators prominently displayed

#### Screen-Specific Status Integration Points
- **Screen 3: Referee Dashboard - My Assignments** - Current Assignment Card requires extra large status display with status prominence
- **Screen 4: Match Results** - Live matches section requires status correlation with referee assignments  
- **Screen 5: Tournament Info** - Tournament status integration with referee assignment status context
- **Screen 6: Settings** - Notification preferences requiring status notification controls

### Assignment Status Management Architecture
**Source:** Story 3.1 and 3.2 implementation patterns, `docs/referee-frontend-spec/information-architecture.md`

#### Assignment Status Types
- **Current Assignment Status:** Active, in-progress assignment with real-time updates
- **Upcoming Assignment Status:** Confirmed future assignments with countdown timers
- **Completed Assignment Status:** Historical assignments with completion timestamps
- **Cancelled Assignment Status:** Cancelled or changed assignments with alert indicators
- **Emergency Assignment Status:** Urgent assignment changes requiring immediate attention

#### Status State Management Requirements
- **Real-time Updates:** Assignment status changes reflected across screens within 2 seconds
- **Offline Capability:** Status tracking available without network connection with sync reconciliation
- **Cross-Screen Consistency:** Status indicators consistent across all screen interfaces
- **Notification Integration:** Status changes communicated through notification system

### Component Architecture & File Structure
**Source:** `CLAUDE.md`, Story 3.3 implementation patterns

#### File Locations for Status System Implementation
- **Status Components:** `components/Status/` - Professional status indicator system for assignment status visualization
- **Assignment Status:** `components/Assignment/AssignmentStatusIndicator.tsx` - Assignment-specific status components
- **Global Status Bar:** `components/navigation/GlobalStatusBar.tsx` - Persistent status bar for all screens  
- **Status Context:** `hooks/useAssignmentStatus.ts` - Global assignment status state management hook
- **Status Service:** `services/AssignmentStatusService.ts` - Assignment status data management and sync service

#### Component Integration Patterns
- **React Native 0.79.5** with React 19 architecture supporting real-time status updates
- **Path aliases `@/*`** configured for root directory imports enabling clean status component organization
- **Themed wrapper patterns** extending base React Native components with status indicator integration
- **Context providers** for cross-screen status state sharing with performance optimization

### Testing Requirements
**Source:** Story 3.1 and 3.2 testing patterns, project testing structure

#### Test File Locations & Patterns
- **Test File Location:** `__tests__/components/Status/` for status indicator testing, `__tests__/services/` for status service testing
- **Testing Framework:** Jest with @testing-library/react-native for React Native component testing
- **Test Patterns:** Status indicator validation, status change propagation testing, cross-screen status consistency verification

#### Status-Specific Testing Requirements  
- **Real-time Status Testing:** Status update propagation across screens with timing validation
- **Offline Status Testing:** Status persistence and sync reconciliation testing
- **Accessibility Testing:** Color-blind accessible status indicators with screen reader navigation
- **Visual Status Testing:** Status color coding consistency and contrast ratio validation
- **Animation Testing:** Status transition animation performance and feedback validation

#### Performance Testing for Status System
- **Status Update Performance:** Status change propagation under 2 seconds across all screens
- **Animation Performance:** Smooth status transitions without UI blocking
- **Memory Performance:** Status state management without memory leaks in long-running sessions

### Integration with Existing Architecture
**Source:** Story 3.3 completion notes, existing component structure

#### Status Integration with Information Hierarchy  
- **Primary Information Integration:** Assignment status indicators as primary referee information in HierarchyContainer
- **Secondary Information Context:** Tournament status correlation with assignment status in InfoCluster components  
- **Context-Sensitive Display:** Status indicators adapted based on referee context from useRefereeContext hook

#### Status Integration with Navigation System
- **NavigationHeader Enhancement:** Assignment status integration in existing navigation header structure
- **BottomTabNavigation Enhancement:** Tab badge system integration with existing navigation architecture
- **Navigation Performance:** Status indicator rendering optimized for <500ms screen transitions

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-14 | 1.0 | Initial story creation for Epic 003 User Story 4 | Bob (SM) |

## Dev Agent Record

### Agent Model Used  
[To be filled during implementation]

### Debug Log References  
[To be filled during implementation]

### Completion Notes List
[To be filled during implementation]

### File List
[To be filled during implementation]

## QA Results
[To be filled during QA review]