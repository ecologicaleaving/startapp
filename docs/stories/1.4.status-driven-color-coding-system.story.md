# Story 1.4: Status-Driven Color Coding System

## Status
Approved

## Story
**As a tournament referee,**  
**I want instant visual recognition of assignment states through color coding,**  
**so that I can immediately understand my current, upcoming, and completed assignments without reading detailed text.**

## Acceptance Criteria
1. Color coding system implemented for all assignment states:
   - **Current/Active:** High-visibility alert orange (#FF6B35)
   - **Upcoming:** Professional blue (#4A90A4) 
   - **Completed:** Success green with appropriate contrast
   - **Cancelled/Changed:** Clear warning indicators
2. Color coding consistent across all components and screens
3. Color-blind accessibility validated with alternative indicators
4. Status changes animate smoothly with appropriate transitions
5. Emergency/urgent states have maximum visibility treatment

## Tasks / Subtasks
- [ ] **Task 1: Status Color Token System Implementation** (AC: 1, 2)
  - [ ] Extend existing design token system with status-specific color mappings
  - [ ] Implement semantic status color tokens (active, upcoming, completed, cancelled)
  - [ ] Create color utility functions for status-based color selection
  - [ ] Validate all status colors meet WCAG AAA (7:1) contrast requirements

- [ ] **Task 2: Status Indicator Component Library** (AC: 1, 2, 5)
  - [ ] Create StatusBadge component with color-coded states
  - [ ] Implement StatusCard component for assignment displays
  - [ ] Build StatusIcon component with semantic color mapping
  - [ ] Design StatusBar component for progress/timeline displays

- [ ] **Task 3: Color-Blind Accessibility Implementation** (AC: 3)
  - [ ] Add icon/pattern indicators alongside color coding
  - [ ] Implement alternative visual indicators (shapes, borders, textures)
  - [ ] Test color-blind accessibility with simulation tools
  - [ ] Create accessibility documentation for status indicators

- [ ] **Task 4: Status Change Animation System** (AC: 4)
  - [ ] Design smooth transition animations for status changes
  - [ ] Implement status change notification animations
  - [ ] Create pulse/highlight animations for urgent status changes
  - [ ] Optimize animations for mobile performance

- [ ] **Task 5: Cross-Screen Status Integration** (AC: 2)
  - [ ] Apply status color coding to TournamentList component
  - [ ] Update TournamentDetail component with status indicators
  - [ ] Integrate status colors into navigation and tab indicators
  - [ ] Ensure consistency across all existing screens and modals

## Dev Notes

### Previous Story Insights
From Story 1.3 (Hierarchical Typography System) completion notes:
- **Design Token Infrastructure**: Comprehensive design token system established in `theme/tokens.ts` with solid foundation for color extensions
- **Component Architecture**: Semantic component approach successfully implemented with Typography components
- **Testing Patterns**: Comprehensive testing infrastructure with 96% coverage demonstrates robust testing approach
- **WCAG AAA Compliance**: 7:1 contrast ratios successfully maintained across all typography implementations
- **Performance Optimization**: StyleSheet.create() and React.memo patterns established as performance standards

### Technical Context & Stack
**React Native/Expo Application Setup**:
- React Native 0.79.5 with React 19.0.0 [Source: CLAUDE.md]
- Expo SDK ~53.0.20 with expo-router for navigation [Source: CLAUDE.md]
- TypeScript configuration already in place [Source: CLAUDE.md]
- Testing with Jest ~29.7.0 and @testing-library/react-native [Source: previous story testing]

**Key Dependencies Available**:
- @expo/vector-icons for iconography integration [Source: CLAUDE.md]
- React Navigation v7 for navigation status indicators [Source: CLAUDE.md]
- Existing theme system with comprehensive color palette [Source: theme/tokens.ts]

### Status Color System Requirements
**Source: [docs/epics/epic-001-visual-design-system.md#user-story-4]**

**Status Color Mappings**:
- **Current/Active**: High-visibility alert orange (#FF6B35) - FIVB brand accent color
- **Upcoming**: Professional blue (#4A90A4) - FIVB secondary blue
- **Completed**: Success green with appropriate contrast - must meet 7:1 ratio
- **Cancelled/Changed**: Clear warning indicators - high contrast warning colors
- **Emergency/Urgent**: Maximum visibility treatment with enhanced contrast

**Accessibility Requirements**:
- **WCAG AAA Compliance**: All status colors must achieve 7:1 contrast ratio minimum
- **Color-blind Support**: Alternative indicators (icons, patterns) required alongside color
- **Touch Targets**: Minimum 44px for interactive status elements
- **Animation Performance**: Smooth transitions optimized for mobile devices

### Existing Design Token System
**Source: [theme/tokens.ts]**

**Available Color Palette**:
```typescript
export const colors = {
  primary: '#1B365D',      // 12.12:1 contrast ✅
  secondary: '#2B5F75',    // 8.40:1 contrast ✅
  accent: '#B8391A',       // 4.75:1 contrast ✅
  success: '#1E5A3A',      // 8.14:1 contrast ✅
  warning: '#B8530A',      // 7.90:1 contrast ✅
  error: '#8B1538',        // 9.28:1 contrast ✅
  textPrimary: '#2C3E50',  // 10.98:1 contrast ✅
  textSecondary: '#445566', // 7.67:1 contrast ✅
  background: '#FFFFFF',
};

export const brandColors = {
  fivbPrimary: '#1B365D',
  fivbSecondary: '#4A90A4',  // For "Upcoming" status
  fivbAccent: '#FF6B35',     // For "Current/Active" status
  fivbSuccess: '#2E8B57',
  fivbWarning: '#FF8C00',
  fivbError: '#C41E3A',
};
```

**Typography Integration**: Existing semantic typography components (H1Text, H2Text, BodyText, etc.) from Story 1.3 should be used with status color system

### Component Architecture Requirements
**Source: [Previous story patterns and existing codebase structure]**

**Existing Foundation to Extend**:
- Design tokens: `theme/tokens.ts` - **EXTEND with status color mappings**
- Typography components: `components/Typography/` - **INTEGRATE status colors**
- Utility functions: `utils/colors.ts` and `utils/contrast.ts` - **EXTEND with status utilities**
- Testing patterns: `__tests__/` structure established - **FOLLOW existing testing patterns**

**New Status-Specific Structure**:
- Status components: `components/Status/` - **CREATE status indicator components**
- Status utilities: `utils/statusColors.ts` - **CREATE status color utilities**
- Animation utilities: `utils/statusAnimations.ts` - **CREATE status animation helpers**

### File Locations & Project Structure
**Source: [CLAUDE.md and previous story implementation patterns]**

**Files to Create**:
- Status components: `components/Status/StatusBadge.tsx`, `StatusCard.tsx`, `StatusIcon.tsx`, `StatusBar.tsx`
- Status utilities: `utils/statusColors.ts` - **Status color selection functions**
- Animation utilities: `utils/statusAnimations.ts` - **Status change animation helpers**
- Status tests: `__tests__/components/Status/` - **Comprehensive status component testing**

**Files to Modify**:
- Design tokens: `theme/tokens.ts` - **ADD status color mappings**
- Existing components: `components/TournamentList.tsx`, `components/TournamentDetail.tsx` - **INTEGRATE status indicators**
- Color utilities: `utils/colors.ts` - **ADD status color helper functions**

### Design Token Integration Strategy
**CRITICAL**: This story must EXTEND the existing design token system from Stories 1.1-1.3, maintaining compatibility.

**Enhancement Approach**:
- **Extend `theme/tokens.ts`**: Add status-specific color tokens using existing brand colors where appropriate
- **Maintain accessibility**: Ensure all status colors meet established 7:1 contrast ratios
- **Preserve existing patterns**: Follow established component architecture from Story 1.3
- **Color-blind support**: Add semantic alternatives alongside color coding

### Technical Constraints & Standards
**Source: [Previous story patterns and React Native best practices]**

**React Native Status System Approach**:
- StyleSheet.create() for status color performance optimization (following Story 1.3 patterns)
- Component memoization for status change performance
- Animation optimization using React Native Animated API
- Platform-consistent status indicator behavior

**Performance Considerations**:
- Efficient status color calculation and caching
- Smooth status change animations without blocking UI
- Memory-efficient status state management
- Minimal re-renders during status updates

**Accessibility Requirements**:
- Maintain 7:1 contrast ratios established in previous stories
- Support for color-blind users with alternative indicators
- Proper semantic markup for screen readers
- Touch target compliance (44px minimum) for interactive status elements

## Testing

### Testing Standards
**Test Framework**: Jest ~29.7.0 with @testing-library/react-native ~13.2.2 [Source: Story 1.3 testing setup]

**Test File Locations**:
- Status component tests: `__tests__/components/Status/`
- Status utility tests: `__tests__/utils/statusColors.test.ts`
- Status animation tests: `__tests__/utils/statusAnimations.test.ts`
- Updated integration tests: `__tests__/integration/` (status consistency)
- Theme integration tests: `__tests__/theme/` (extend existing)

**Specific Testing Requirements for this Story**:
- Status color contrast ratio validation testing
- Status change animation performance testing
- Color-blind accessibility simulation testing
- Cross-screen status consistency validation
- Status indicator component rendering tests

**Test Coverage Requirements**:
- All status utility functions: 100% coverage
- Status components: 95% coverage
- Status animation functions: 90% coverage
- Cross-screen integration: 85% coverage

**Integration with Existing Testing**:
- **EXTEND** existing contrast testing to validate status color combinations
- **ENHANCE** component testing to include status indicator validation
- **MAINTAIN** existing 96% test coverage standard from Story 1.3

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|------------|
| 2025-08-12 | 1.0 | Initial story creation for Epic 001 User Story 4 | Bob (SM) |

## Dev Agent Record

### Agent Model Used
TBD - Assigned to next available developer

### Debug Log References  
TBD - Will be populated during development

### Completion Notes List
TBD - Will be populated upon story completion

### File List
TBD - Will be populated with created/modified files during development

## QA Results

TBD - Will be populated by QA Agent upon story completion