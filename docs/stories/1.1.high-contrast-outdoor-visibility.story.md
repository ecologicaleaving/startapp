# Story 1.1: High-Contrast Outdoor Visibility

## Status
Approved


## Story
**As a** tournament referee working in direct sunlight,  
**I want** all interface elements to have high contrast ratios (7:1 minimum),  
**so that** I can clearly read assignment information regardless of lighting conditions.

## Acceptance Criteria
1. All text-to-background combinations achieve minimum 7:1 contrast ratio
2. Automated contrast testing integrated into development workflow  
3. Color palette documented with contrast ratio specifications
4. Manual sunlight visibility testing completed successfully
5. WCAG AAA compliance achieved for all critical interface elements

## Tasks / Subtasks
- [ ] **Task 1: Design Token Infrastructure Setup** (AC: 2, 3)
  - [ ] Configure design token management system (Expo/React Native compatible)
  - [ ] Create token hierarchy and naming conventions for colors, typography, spacing
  - [ ] Implement build process for token distribution across React Native components
  - [ ] Set up automated token validation and testing

- [ ] **Task 2: Color System Implementation** (AC: 1, 3)
  - [ ] Define semantic color tokens based on referee frontend spec color palette
  - [ ] Calculate and validate all color combinations achieve 7:1 contrast ratios
  - [ ] Create color utility functions and hooks for React Native/Expo
  - [ ] Document color system with contrast ratio specifications
  
- [ ] **Task 3: Typography System Implementation** (AC: 1)
  - [ ] Implement responsive typography scale (Hero 40px, H1 32px, H2 24px, Body 16px)
  - [ ] Create typography React components with proper semantic markup
  - [ ] Ensure typography meets 7:1 contrast requirements against all backgrounds
  - [ ] Define typography spacing and line-height for optimal readability

- [ ] **Task 4: Automated Contrast Testing Integration** (AC: 2, 5)
  - [ ] Implement automated contrast ratio testing in CI/CD pipeline using Jest
  - [ ] Create contrast validation utilities for development
  - [ ] Set up testing for WCAG AAA compliance validation
  - [ ] Configure automated regression testing for contrast ratios

- [ ] **Task 5: Component Foundation** (AC: 1, 5)
  - [ ] Create base Text component with typography system integration
  - [ ] Create base Container/View components with proper background treatments
  - [ ] Implement Button components with high-contrast styling
  - [ ] Ensure all foundational components meet accessibility requirements

- [ ] **Task 6: Sunlight Visibility Validation** (AC: 4)
  - [ ] Conduct manual outdoor visibility testing with physical devices
  - [ ] Create high-contrast mode fallback for extreme lighting conditions
  - [ ] Document testing results and validation methodology
  - [ ] Implement user-controlled contrast adjustment options if needed

## Dev Notes

### Previous Story Insights
- No previous story exists - this is the first story (1.1) in Epic 1

### Technical Context & Stack
**React Native/Expo Application Setup**: 
- React Native 0.79.5 with React 19.0.0
- Expo SDK ~53.0.20 with expo-router for navigation
- TypeScript configuration already in place
- Testing with Jest ~29.7.0 and @testing-library/react-native

**Key Dependencies Available**:
- @expo/vector-icons for iconography
- expo-font for custom fonts if needed
- React Navigation v7 for navigation components
- AsyncStorage for persisting user preferences

### Color Palette Requirements
**Source: [docs/referee-frontend-spec/branding-style-guide.md]**

**Core Color System**:
- **Primary**: #1B365D (Navigation, headers, court numbers)
- **Secondary**: #4A90A4 (Supporting elements, borders)  
- **Accent**: #FF6B35 (Call-to-action buttons, active states)
- **Success**: #2E8B57 (Active/live match indicators)
- **Warning**: #FF8C00 (Upcoming assignments, alerts)
- **Error**: #C41E3A (Cancelled matches, critical alerts)
- **Text Primary**: #2C3E50 (Primary text, headings)
- **Text Secondary**: #7F8C8D (Secondary text, metadata)
- **Background**: #FFFFFF (Card backgrounds, primary surfaces)

**Contrast Requirements**: All combinations must achieve 7:1 minimum contrast ratio for WCAG AAA compliance.

### Typography System Specifications  
**Source: [docs/referee-frontend-spec/branding-style-guide.md]**

**Typography Scale**:
- **Hero**: 40px Bold (Current court number display)
- **H1**: 32px Bold (Screen titles, primary headings)
- **H2**: 24px Semibold (Section headers, team names)  
- **Body Large**: 18px Regular (Primary content, assignment details)
- **Body**: 16px Regular (Standard text, general information)
- **Caption**: 14px Medium (Metadata, timestamps, status text)

**Font Family**: SF Pro (iOS) / Roboto (Android) - System fonts for guaranteed readability

### Component Architecture Requirements
**Source: [docs/referee-frontend-spec/component-library-design-system.md]**

**Design System Foundation**:
- Built specifically for **sunlight readability** and **quick information scanning**
- **Status-first design** - every component communicates current state clearly
- **Touch-optimized** - large hit targets for outdoor conditions (44px minimum, 56px preferred)

**Component Requirements**:
- All components must support status-driven color coding
- High contrast ratios for outdoor visibility required
- Icon + text combinations needed for accessibility
- Consistent styling patterns across all components

### Accessibility Requirements
**Source: [docs/referee-frontend-spec/accessibility-requirements.md]**

**WCAG 2.1 AA compliance with AAA color contrast**:
- Color contrast ratios: 7:1 minimum for all text-background combinations
- Focus indicators: 4px outline with high contrast color  
- Text sizing: Minimum 12px, scalable to 200%
- Touch targets: 44px minimum hit area, 56px preferred
- Alternative text: Descriptive alt text for all icons and status indicators
- Heading structure: Proper H1-H3 hierarchy for screen reader navigation

### File Locations & Project Structure
**Source: [CLAUDE.md project overview and package.json structure]**

**React Native/Expo File Structure**:
- Design tokens: `constants/` or `theme/` directory
- Components: Create reusable components in `components/` directory  
- Typography components: `components/Text/` or `components/Typography/`
- Color utilities: `utils/colors.ts` or `theme/colors.ts`
- Testing: `__tests__/` directory for component tests
- Type definitions: `types/` for TypeScript interfaces

**Expo Router Structure**:
- App uses expo-router with file-based routing in `/app` directory
- Main layout in `/app/_layout.tsx`  
- Current structure is minimal, ready for component integration

### Technical Constraints & Standards
**Source: [docs/development-setup-guide.md and package.json]**

**Development Environment**:
- Node.js 18+ with npm package manager
- TypeScript ~5.8.3 configured
- ESLint config-expo ~9.2.0 for code quality
- Jest testing with @testing-library/react-native

**Performance Considerations**:
- System fonts (SF Pro/Roboto) for guaranteed readability and performance
- Efficient CSS-in-JS solutions recommended for styling
- Asset optimization for mobile delivery required
- Performance budgets and monitoring needed

**React Native Styling Approach**:
- StyleSheet.create() for performance optimization
- Platform-specific styling when needed (iOS vs Android)
- Responsive design using Dimensions API or flex layouts
- Theme provider pattern for consistent styling

### Testing Requirements
**Source: [package.json scripts and jest configuration]**

**Testing Framework**: Jest ~29.7.0 with @testing-library/react-native
**Test Location**: `__tests__/` directory or co-located with components  
**Testing Standards**:
- Unit tests for all color utility functions
- Component tests for typography and styling
- Contrast ratio validation automated tests
- Accessibility testing with @testing-library/jest-native
- Visual regression tests for design token consistency

**Required Test Coverage**:
- Color contrast ratio calculations
- Typography component rendering
- Design token integration
- Accessibility compliance (screen reader, keyboard navigation)
- Theme provider functionality

### Design Token Management Strategy
**Technical Implementation Requirements**:

**Token Architecture**:
- Create centralized token system compatible with React Native
- Support for semantic tokens (colors, typography, spacing)
- Type-safe token access with TypeScript interfaces
- Build-time validation of token consistency

**Integration Strategy**:
- Create React Context for theme management
- Custom hooks for accessing design tokens (useColors, useTypography)
- StyleSheet integration patterns for performant styling
- Support for runtime theme switching if needed

**Validation Requirements**:
- Automated contrast ratio validation for all color combinations
- TypeScript validation for token usage
- Build-time checks for missing or invalid tokens
- Runtime validation in development mode

## Testing

### Testing Standards
**Test Framework**: Jest ~29.7.0 with @testing-library/react-native ~13.2.2

**Test File Locations**:
- Component tests: `__tests__/components/`
- Utility tests: `__tests__/utils/`  
- Theme tests: `__tests__/theme/`

**Testing Frameworks and Patterns**:
- Jest for unit testing
- @testing-library/react-native for component testing
- @testing-library/jest-native for accessibility testing
- Mock implementations for React Native platform APIs

**Specific Testing Requirements for this Story**:
- Contrast ratio calculation validation tests
- Typography component rendering tests  
- Design token integration tests
- Accessibility compliance tests (screen reader, keyboard navigation)
- Color utility function tests
- Theme provider context tests

**Test Coverage Requirements**:
- All color utility functions: 100% coverage
- Typography components: 95% coverage  
- Design token validation: 100% coverage
- Accessibility features: 95% coverage

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-08-12 | 1.0 | Initial story creation from Epic 001 User Story 1 | Bob (SM) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by Dev Agent*

### Debug Log References  
*To be filled by Dev Agent*

### Completion Notes List
*To be filled by Dev Agent*

### File List
*To be filled by Dev Agent*

## QA Results
*This section will be populated by QA Agent after story completion*