# Story 3.2: Dedicated My Assignments Screen

## Status
Draft

## Story
**As a tournament referee,**  
**I want a dedicated "My Assignments" screen with comprehensive assignment management,**  
**so that I can efficiently manage all my assignments, view my schedule timeline, and update assignment status.**

## Acceptance Criteria
1. My Assignments screen implemented with comprehensive assignment management:
   - **Timeline View:** Visual timeline of all referee assignments with time relationships
   - **Assignment Status Management:** Update assignment status (confirmed, in-progress, completed)
   - **Schedule Overview:** Daily and tournament-wide assignment schedule view
   - **Assignment Details:** Detailed assignment information with match context
2. Assignment interaction features for referee workflow optimization:
   - **Assignment Preparation:** Notes, special requirements, and preparation checklists
   - **Result Entry Access:** Direct navigation to result entry for completed assignments
   - **Assignment History:** Historical assignment records with performance notes
   - **Schedule Conflicts:** Visual identification of potential scheduling conflicts
3. My Assignments screen optimized for referee task completion patterns
4. Integration with assignment notification and reminder system
5. Offline capability for assignment viewing and status updates

## Tasks / Subtasks
- [ ] **Task 1: Enhanced Assignment Timeline System** (AC: 1)
  - [ ] Upgrade existing AssignmentTimeline component with comprehensive timeline view
  - [ ] Implement time relationship visualization between assignments
  - [ ] Add schedule overview with daily and tournament-wide perspectives
  - [ ] Create assignment detail expansion for match context display
  - [ ] Add timeline navigation and date/time filtering capabilities

- [ ] **Task 2: Assignment Status Management System** (AC: 1, 2)
  - [ ] Create assignment status update interface with confirmed/in-progress/completed states
  - [ ] Implement assignment preparation system with notes and checklists
  - [ ] Build historical assignment records with performance tracking
  - [ ] Add schedule conflict detection and visual indication system
  - [ ] Integrate with existing Status indicator system from Story 2.4

- [ ] **Task 3: Assignment Interaction & Navigation Enhancement** (AC: 2)
  - [ ] Create direct result entry access from completed assignments
  - [ ] Build assignment preparation checklist system
  - [ ] Implement assignment note-taking and special requirements tracking
  - [ ] Add assignment performance notes for historical records
  - [ ] Create seamless navigation between assignment details and result entry

- [ ] **Task 4: My Assignments Screen Architecture Redesign** (AC: 3, 4)
  - [ ] Redesign existing MyAssignmentsScreen.tsx with workflow-optimized layout
  - [ ] Implement assignment-first information hierarchy
  - [ ] Build notification and reminder system integration
  - [ ] Create responsive design optimized for referee task completion patterns
  - [ ] Add pull-to-refresh and real-time updates functionality

- [ ] **Task 5: Offline Capability & Performance Optimization** (AC: 5)
  - [ ] Implement offline assignment viewing with cached data
  - [ ] Build offline status update capability with sync
  - [ ] Create robust error handling and graceful degradation
  - [ ] Add comprehensive loading states and performance optimization
  - [ ] Integrate with existing offline system foundation

## Dev Notes

### Previous Story Insights
From Story 3.1 (Assignment-First Dashboard Redesign):
- Established comprehensive assignment data structures in `types/assignments.ts` with extended Assignment interface including matchType, importance, tournamentInfo fields
- Created reusable assignment management hooks (`useCurrentAssignment.ts`) with real-time updates and 30-second refresh intervals
- Built foundation visual timeline component (`AssignmentTimeline.tsx`) that can be enhanced for comprehensive My Assignments screen
- Implemented comprehensive assignment utilities in `assignmentDashboard.ts` for assignment detection and optimization
- Established testing patterns for assignment-related components with hooks, utilities, and screen integration testing

### Data Models & Assignment System
**Source:** `types/assignments.ts`, Story 3.1 implementation  
- Assignment interface includes: id, courtNumber, homeTeam, awayTeam, matchTime, refereePosition, status, matchType, importance, tournamentInfo, notes
- AssignmentStatus type: 'current' | 'upcoming' | 'completed' | 'cancelled'
- RefereePosition type: '1st' | '2nd' | 'Line' | 'Reserve'
- Assignment data supports comprehensive timeline visualization and status management

### Component Specifications & Architecture Foundation
**Source:** `docs/referee-frontend-spec/component-library-design-system.md`
- Assignment Card component system with status-based variants (Current Assignment Hero, Upcoming Assignment, Completed Assignment)
- Status indicators with outdoor-optimized color coding: Active (Green), Upcoming (Blue), Completed (Gray), Cancelled (Red)
- Touch-optimized design with large hit targets for outdoor conditions
- High contrast ratios for sunlight readability requirements

**Source:** Story 3.1 foundation components
- `components/Dashboard/AssignmentTimeline.tsx` (298 lines) - Visual timeline showing daily assignment schedule with interactive selection
- `components/Dashboard/CurrentAssignmentCard.tsx` (195 lines) - Prominent current assignment display with context and actions
- `hooks/useCurrentAssignment.ts` (132 lines) - Assignment detection and management with real-time updates
- `utils/assignmentDashboard.ts` (226 lines) - Assignment detection utilities and dashboard optimization

### File Locations & Project Structure
**Source:** Project structure analysis and Story 3.1 implementation
- **Main Screen:** `screens/MyAssignmentsScreen.tsx` - Currently basic implementation requiring comprehensive enhancement
- **Assignment Components:** `components/Assignment/`, `components/Dashboard/`, `components/referee/` - Foundation components available
- **Status System:** `components/Status/` - Professional status indicator system from Story 2.4
- **Assignment Types:** `types/assignments.ts` - Extended assignment interface established in Story 3.1
- **Assignment Hooks:** `hooks/useCurrentAssignment.ts` - Foundation hook for enhancement
- **Utilities:** `utils/assignmentDashboard.ts` - Assignment utilities for timeline and management functions

### User Flow & Screen Layout Requirements
**Source:** `docs/referee-frontend-spec/user-flows-referee-specific-features.md`, `docs/referee-frontend-spec/screen-layouts.md`
- My Assignments screen entry points: App launch, "My Assignments" tab navigation
- Success criteria: Referee can identify assignments and status within 3 seconds
- Screen layout requirements: Current Assignment Card (extra large), Upcoming assignments list (read-only cards), Completed assignments (grayed out reference)
- Interactive elements: Tap for assignment details, assignment status updates, result entry access

### Technical Architecture & React Native Patterns
**Source:** `CLAUDE.md`, existing codebase architecture
- **React Native Environment:** Expo React Native 0.79.5 with React 19, TypeScript strict mode
- **Navigation:** Expo Router with file-based routing, navigation header and bottom tab system
- **Component Patterns:** React.memo optimization, StyleSheet.create performance patterns
- **State Management:** Custom hooks with useEffect for lifecycle management and real-time updates
- **Path Aliases:** `@/*` maps to root directory for component imports

### Epic 1 Design System Integration
**Source:** Story 3.1 QA Results, Epic 1 foundation implementation
- Design tokens integration via `theme/tokens` for consistent outdoor-optimized styling
- Status-driven color coding system with WCAG AAA compliance
- High-contrast outdoor visibility standards maintained
- Touch target compliance from Story 2.5 (44px minimum interactive elements)

### Performance & Offline Requirements
**Source:** `docs/referee-frontend-spec/performance-considerations.md`, Story 3.1 implementation
- Screen transition performance <500ms requirement
- Real-time updates within 2 seconds for assignment changes
- Offline capability for core assignment viewing functionality
- Pull-to-refresh functionality with visual feedback
- Auto-refresh intervals based on assignment status (30-second intervals established)

### Testing Requirements
**Source:** Story 3.1 testing patterns
- Test file locations: `__tests__/screens/MyAssignmentsScreen.test.tsx`, `__tests__/components/Assignment/`
- Testing frameworks: Jest with @testing-library/react-native
- Test coverage requirements: Component testing, hook testing, utility testing, screen integration testing
- Performance testing for screen transitions and real-time updates
- Edge case testing for offline capability and error states

### Testing
- **Test File Location:** `__tests__/screens/MyAssignmentsScreen.test.tsx`, `__tests__/components/Assignment/`
- **Testing Framework:** Jest with @testing-library/react-native for React Native component testing
- **Test Patterns:** Follow established patterns from Story 3.1 with comprehensive hook testing, utility testing, and screen integration testing
- **Performance Testing:** Screen transition times, real-time update responsiveness, offline capability validation
- **Accessibility Testing:** Screen reader navigation, touch target compliance, high contrast mode validation
- **Edge Case Testing:** Network connectivity changes, assignment data synchronization, error state handling

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-13 | 1.0 | Initial story creation for Epic 003 User Story 2 | Bob (SM) |

## Dev Agent Record

### Agent Model Used
[To be filled during implementation]

### Debug Log References  
[To be filled during implementation]

### Completion Notes List
[To be filled during implementation]

### File List
[To be filled during implementation]

## QA Results
[To be filled during QA review]